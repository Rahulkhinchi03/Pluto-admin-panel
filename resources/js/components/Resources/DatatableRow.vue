<template>
  <tr>
    <td class="px-6 py-4 whitespace-nowrap">
      <input type="checkbox" name="select" v-model="checked" @input="$emit('select')" class="block cursor-pointer h-4 w-4">
    </td>
    <td v-for="field in resource.fields"
        class="px-6 py-4 whitespace-nowrap"
        :class="[`text-${field.align}`]">
      <component :is="`index-${field.component}`" :field="field" />
    </td>
    <td class="px-4 whitespace-nowrap">
      <div class="flex text-gray-500 space-x-1">
        <!-- Details link -->
        <router-link
            :to="{ name: 'resource-show', params: { resourceName: $route.params.resourceName, resourceId: resource.key } }"
            class="focus:outline-none focus:ring-2 focus:ring-blue-500 rounded hover:text-blue-500 p-1.5">
          <svg class="h-5 w-5" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8 5.22223C7.70559 5.22683 7.41336 5.2736 7.13222 5.36112C7.26227 5.58981 7.33151 5.84804 7.33333 6.11112C7.33333 6.3154 7.2931 6.51767 7.21492 6.7064C7.13675 6.89513 7.02217 7.06662 6.87772 7.21106C6.73327 7.35551 6.56179 7.47009 6.37306 7.54827C6.18433 7.62644 5.98205 7.66668 5.77777 7.66668C5.51469 7.66485 5.25647 7.59561 5.02777 7.46556C4.84734 8.09134 4.86837 8.75803 5.08788 9.37119C5.3074 9.98435 5.71428 10.5129 6.25088 10.882C6.78748 11.251 7.4266 11.4419 8.07771 11.4276C8.72883 11.4132 9.35892 11.1944 9.87875 10.802C10.3986 10.4097 10.7818 9.86374 10.9741 9.24151C11.1664 8.61927 11.158 7.95231 10.9502 7.33508C10.7424 6.71786 10.3456 6.18167 9.81613 5.80246C9.28665 5.42326 8.65127 5.22026 8 5.22223ZM15.9033 7.92779C14.397 4.98861 11.4147 3 8 3C4.58527 3 1.60221 4.99 0.0966517 7.92806C0.0331076 8.05376 0 8.19264 0 8.33348C0 8.47433 0.0331076 8.6132 0.0966517 8.7389C1.60304 11.6781 4.58527 13.6667 8 13.6667C11.4147 13.6667 14.3978 11.6767 15.9033 8.73862C15.9669 8.61292 16 8.47405 16 8.3332C16 8.19236 15.9669 8.05348 15.9033 7.92779ZM8 12.3334C5.25972 12.3334 2.74749 10.8056 1.39082 8.33334C2.74749 5.86112 5.25944 4.33334 8 4.33334C10.7406 4.33334 13.2525 5.86112 14.6092 8.33334C13.2528 10.8056 10.7406 12.3334 8 12.3334Z"/></svg>
        </router-link>

        <!-- Edit link -->
        <router-link
            :to="{ name: 'resource-edit', params: { resourceName: $route.params.resourceName, resourceId: resource.key } }"
            class="focus:outline-none focus:ring-2 focus:ring-blue-500 rounded hover:text-blue-500 p-1.5">
          <svg class="h-5 w-5" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.4823 2.86938L13.1147 1.50238C12.4449 0.832597 11.3608 0.832495 10.6909 1.50235L2.63248 9.50811L2.00835 13.2912C1.94043 13.7029 2.29699 14.0596 2.7088 13.9917L6.49188 13.3675L14.4982 5.30909C15.1667 4.64053 15.1731 3.56021 14.4823 2.86938V2.86938ZM5.06322 8.66796L9.3862 4.37301L11.6269 6.61376L7.33203 10.9367V9.88671H6.11328V8.66796H5.06322ZM4.08538 12.6322L3.36776 11.9146L3.67601 10.0462L4.14319 9.58202H5.19921V10.8008H6.41796V11.8568L5.95377 12.324L4.08538 12.6322V12.6322ZM13.708 4.51911L13.7067 4.5204L13.7055 4.5217L12.4859 5.74918L10.2508 3.51405L11.4783 2.29454L11.4796 2.29327L11.4808 2.292C11.7131 2.05978 12.0896 2.05691 12.3247 2.29197L13.6921 3.65936C13.9429 3.91014 13.9445 4.28267 13.708 4.51911V4.51911Z"/></svg>
        </router-link>

        <!-- Remove button -->
        <button
            v-if="!resource.trashed"
            @click="$emit('delete')"
            class="focus:outline-none focus:ring-2 focus:ring-blue-500 rounded hover:text-red-500 p-1.5">
          <svg class="h-5 w-5" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8.80469 11.5625H9.41406C9.49487 11.5625 9.57237 11.5304 9.62951 11.4733C9.68665 11.4161 9.71875 11.3386 9.71875 11.2578V5.77344C9.71875 5.69263 9.68665 5.61513 9.62951 5.55799C9.57237 5.50085 9.49487 5.46875 9.41406 5.46875H8.80469C8.72388 5.46875 8.64638 5.50085 8.58924 5.55799C8.5321 5.61513 8.5 5.69263 8.5 5.77344V11.2578C8.5 11.3386 8.5321 11.4161 8.58924 11.4733C8.64638 11.5304 8.72388 11.5625 8.80469 11.5625ZM12.9688 3.03125H10.8763L10.013 1.5916C9.90469 1.41108 9.75143 1.2617 9.56819 1.15802C9.38495 1.05434 9.17798 0.9999 8.96744 1H6.40756C6.19711 0.999988 5.99024 1.05447 5.8071 1.15815C5.62395 1.26182 5.47078 1.41115 5.36248 1.5916L4.49869 3.03125H2.40625C2.29851 3.03125 2.19517 3.07405 2.11899 3.15024C2.0428 3.22642 2 3.32976 2 3.4375V3.84375C2 3.95149 2.0428 4.05483 2.11899 4.13101C2.19517 4.2072 2.29851 4.25 2.40625 4.25H2.8125V12.7812C2.8125 13.1045 2.9409 13.4145 3.16946 13.643C3.39802 13.8716 3.70802 14 4.03125 14H11.3438C11.667 14 11.977 13.8716 12.2055 13.643C12.4341 13.4145 12.5625 13.1045 12.5625 12.7812V4.25H12.9688C13.0765 4.25 13.1798 4.2072 13.256 4.13101C13.3322 4.05483 13.375 3.95149 13.375 3.84375V3.4375C13.375 3.32976 13.3322 3.22642 13.256 3.15024C13.1798 3.07405 13.0765 3.03125 12.9688 3.03125ZM6.36313 2.29264C6.3767 2.27004 6.39591 2.25135 6.41888 2.2384C6.44184 2.22545 6.46778 2.21868 6.49414 2.21875H8.88086C8.90718 2.21872 8.93306 2.22551 8.95598 2.23846C8.9789 2.25141 8.99807 2.27007 9.01162 2.29264L9.45494 3.03125H5.92006L6.36313 2.29264ZM11.3438 12.7812H4.03125V4.25H11.3438V12.7812ZM5.96094 11.5625H6.57031C6.65112 11.5625 6.72862 11.5304 6.78576 11.4733C6.8429 11.4161 6.875 11.3386 6.875 11.2578V5.77344C6.875 5.69263 6.8429 5.61513 6.78576 5.55799C6.72862 5.50085 6.65112 5.46875 6.57031 5.46875H5.96094C5.88013 5.46875 5.80263 5.50085 5.74549 5.55799C5.68835 5.61513 5.65625 5.69263 5.65625 5.77344V11.2578C5.65625 11.3386 5.68835 11.4161 5.74549 11.4733C5.80263 11.5304 5.88013 11.5625 5.96094 11.5625Z"/></svg>
        </button>

        <!-- Restore button -->
        <button
            v-else
            @click="$emit('restore')"
            class="focus:outline-none focus:ring-2 focus:ring-blue-500 rounded hover:text-blue-500 p-1.5">
          <svg class="h-5 w-5" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8.48807 1.00001C6.75118 1.00313 5.17417 1.68757 4.00989 2.80022L3.07384 1.86417C2.67755 1.46788 2 1.74853 2 2.30895V5.82259C2 6.17 2.28162 6.45162 2.62903 6.45162H6.14267C6.70309 6.45162 6.98374 5.77407 6.58748 5.37778L5.49322 4.28353C6.30216 3.5261 7.34889 3.10653 8.46094 3.09694C10.8827 3.07602 12.924 5.03585 12.9031 7.53796C12.8832 9.91153 10.9589 11.9032 8.5 11.9032C7.42207 11.9032 6.4033 11.5185 5.60042 10.8141C5.47611 10.705 5.28837 10.7116 5.17142 10.8286L4.13189 11.8681C4.0042 11.9958 4.01052 12.204 4.14453 12.325C5.29712 13.3661 6.82452 14 8.5 14C12.0898 14 15 11.0899 15 7.50006C15 3.91434 12.0738 0.993589 8.48807 1.00001Z"/></svg>
        </button>
      </div>
    </td>
  </tr>
</template>

<script>
export default {
  props: ['resource', 'checked'],
  emits: ['select', 'delete', 'restore']
}
</script>
